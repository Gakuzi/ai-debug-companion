{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/Gakuzi/ai-debug-companion/schemas/logEntry.schema.json",
  "title": "LogEntry",
  "type": "object",
  "properties": {
    "ts": { "type": "string", "format": "date-time" },
    "level": { "type": "string", "enum": ["DEBUG", "INFO", "WARN", "ERROR", "FATAL"] },
    "msg": { "type": "string" },
    "code": { "type": ["string", "number"] },
    "http": {
      "type": "object",
      "properties": {
        "method": { "type": "string", "enum": ["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS", "HEAD"] },
        "url": { "type": "string" },
        "status": { "type": "integer" },
        "latencyMs": { "type": "number", "minimum": 0 }
      },
      "additionalProperties": false
    },
    "ctx": {
      "type": "object",
      "properties": {
        "module": { "type": "string" },
        "file": { "type": "string" },
        "func": { "type": "string" },
        "line": { "type": "integer", "minimum": 0 },
        "model": { "type": "string" },
        "keyMask": { "type": "string" }
      },
      "additionalProperties": false
    },
    "trace": {
      "type": "object",
      "properties": {
        "traceId": { "type": "string" },
        "spanId": { "type": "string" },
        "parentId": { "type": "string" }
      },
      "additionalProperties": false
    },
    "stack": { "type": "string" },
    "payload": { "type": ["object", "array", "string", "number", "boolean", "null"] }
  },
  "required": ["ts", "level", "msg"],
  "additionalProperties": true
}
